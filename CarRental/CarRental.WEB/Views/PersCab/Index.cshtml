@model CarRental.WEB.Models.PersonalCabViewModel
@using CarRental.BLL
@if (ViewBag.Res == "added")
{
    <div class="alert alert-primary" role="alert" id="alert">
        @Resource.AddedReservation
    </div>
}
else if (ViewBag.Res == "deleted")
{
    <div class="alert alert-danger" role="alert" id="alert">
        @Resource.CanseledReservation
    </div>
}

    <div class="row">
        <div class="col-12 offset-0 offset-md-2 col-md-10">
            @foreach (var o in Model.Orders)
            {
                <div class=" mt-2 border p-3 rounded">
                    <div class=" mt-2 row border-bottom ">
                        <div class="col-3">
                            <h4 class="mr-2"> @o.Car.Name</h4>
                        </div>                    
                        <div class=" col-3">
                            <span class="p-2  text-center align-middle pr-0">Status</span>
                            @if (o.Status.ToLower() == "pending")
                            {
                                <span class=" p-2  text-center align-middle ">@o.Status</span>
                            }
                            else if (o.Status.ToLower() == "completed")
                            {
                                <span class="p-2 bg-secondary  text-center align-middle ">@o.Status</span>
                            }
                            else if (o.Status.ToLower() == "confirmed")
                            {
                                <span class="p-2 bg-success  text-center align-middle ">@o.Status</span>
                            }
                            else if (o.Status.ToLower() == "rejected")
                            {
                                <span class="p-2 bg-warning  text-center align-middle ">@o.Status</span>
                            }
                            else if (o.Status.ToLower() == "fine")
                            {
                                <span class="p-2 bg-danger  text-center align-middle ">@o.Status</span>
                            }
                        </div>
                        <div class="col-2 offset-4">
                            <a id="sb-btt" href="@Url.Action( "DeleteOrder",  new {Id = o.Id })" , class="btn btn-danger  text-dark mb-2"><i class="fa fa-trash mr-1 d-inline"></i></a>
                        </div>
                    </div>
                    <div class=" row">
                        @{
                            var dataTarget = "carouselExampleIndicators" + o.Car.Id.ToString();
                        }
                        <div class="col-5 col-md-3">
                            <div id="@dataTarget" class="carousel slide mr-1 " data-ride="carousel">

                                <div class="carousel-inner">
                                    @if (o.Car.Image != null)
                                    {
                                        <div class="carousel-item active " style="height:80px;">
                                            <img src="@o.Car.Image" class=" img-fluid ml-2 mr-2 rounded responsive" alt="carDescription">
                                        </div>
                                    }
                                    @if (o.Car.Image2 != null)
                                    {
                                        <div class="carousel-item active">
                                            <img src="@o.Car.Image2" class=" img-fluid ml-2 mr-2 rounded responsive" alt="carDescription">
                                        </div>
                                    }
                                    @if (o.Car.Image3 != null)
                                    {
                                        <div class="carousel-item active">
                                            <img src="@o.Car.Image3" class=" img-fluid ml-2 mr-2 rounded responsive" alt="carDescription">
                                        </div>
                                    }
                                </div>
                                <a class="carousel-control-prev" href="#@dataTarget" role="button" data-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="carousel-control-next" href="#@dataTarget" role="button" data-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Next</span>
                                </a>
                            </div>
                            <div class="mt-2">
                                @if (o.Status.ToLower() == "confirmed")
                                {
                                    <a id="sb-btt" href="@Url.Action( "PayTheBill",  new {Id = o.Id })" , class="btn btn-primary  text-white mb-2 ml-1"><i class="fa fa-money-check-alt mr-2 d-inline ">Pay bill</i></a>
                                }
                                else if (o.Status.ToLower() == "fine")
                                {
                                    <a id="sb-btt" href="@Url.Action( "PayTheFine",  new {Id = o.Id })" , class="btn btn-danger  text-white mb-2"><i class="fa fa-money-check-alt mr-1 d-inline">Pay fine</i></a>

                                }
                            </div>

                        </div>



                        <div class="mr-1 col-6 col-md-4">
                            <h5 class="card-title">@o.Car.Manufacturer</h5>
                            <p class="font-weight-bold">Issuance</p>
                            <span>@o.StartTime.ToString().Split(' ')[0] - @o.StartPlace</span>
                            <p class="mt-3 font-weight-bold">Return</p>

                            <span>@o.EndTime.ToString().Split(' ')[0] - @o.EndPlace</span>

                            <p class="mt-3 font-weight-bold"><span>Price:</span> @o.OrdSum</p>
                        </div>
                        @if (o.ManagComment != null)
                        {
                            <div class="ml-4 col-12 col-md-4">
                                <p class="font-weight-bold">Manager Comment</p>
                                <p>@o.ManagComment</p>
                            </div>
                        }

                    </div>
                </div>
            }

        </div>
    </div>


<script>
    $(document).ready(function () {


        window.setTimeout(function () {
            $("#alert").alert('close');
        }, 2000);

    });
</script>